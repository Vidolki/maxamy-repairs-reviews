<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Maxamy — Reviews</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --text:#1D1D1F;
    --card:#FFFFFF;             /* white review cards */
    --gap:24px;                 /* desktop/tablet card gap */
    --radius:16px;
    --sidepad:72px;             /* arrow inset */
    --vpad-top:6px;             /* almost flush above cards */
    --vpad-bottom:0px;          /* almost flush below brand row */
  }

  *{box-sizing:border-box}
  html,body{
    margin:0;
    background:transparent;     /* fully transparent around the block */
    color:var(--text);
    font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }

  /* ===== Section (tight vertical spacing) ===== */
  .reviews{
    background:transparent;
    padding:var(--vpad-top) 0 var(--vpad-bottom);
    margin:0;
    overflow:hidden;            /* no inner scroll capture */
    position:relative;
  }

  .container{
    max-width:1120px;
    margin:0 auto;
    padding:0 16px;             /* no extra bottom padding */
    position:relative;
    z-index:1;
  }

  /* ===== Carousel ===== */
  .shell{position:relative; padding:0 var(--sidepad)}
  .viewport{
    overflow:hidden;
    touch-action: pan-x;          /* allow horizontal, block vertical */
    overscroll-behavior: contain; /* stop rubber-band/scroll chaining on iOS */
    border-radius:20px;
    margin:0;
  }
  .track{
    display:flex;
    gap:var(--gap);
    margin:0; padding:0; list-style:none;
    will-change:transform;
    transition:transform .55s ease;
  }

  /* ===== Cards ===== */
  .card{
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:0 10px 24px rgba(0,0,0,.06);
    padding:20px;
    display:flex; flex-direction:column; min-height:180px;
    min-width:calc((100% - 3*var(--gap)) / 4); /* desktop default – overridden below */
  }

  .top{display:flex; align-items:center; gap:10px; margin-bottom:6px; min-height:28px}
  .name{font-weight:700; flex:1 1 auto; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .stars{flex:0 0 auto; width:6.6ch; text-align:right; letter-spacing:.06em}
  .stars .full{color:#FA8700}
  .stars .empty{color:#FA8700; opacity:.25}
  .verify{display:flex; align-items:center; gap:2px; font-size:10px; opacity:.9}
  .verify svg{width:14px; height:14px; display:block; fill:#1D1D1F}
  .body{margin-top:8px; line-height:1.45}

  /* ===== Arrows ===== */
  .nav{
    position:absolute; top:50%; transform:translateY(-50%);
    width:46px; height:46px; border-radius:50%; border:0; cursor:pointer;
    background:#fff; color:#1D1D1F; box-shadow:0 8px 22px rgba(0,0,0,.16);
    display:grid; place-items:center; font-size:28px; line-height:1;
    transition:transform .16s ease;
  }
  .nav:hover{transform:translateY(-50%) scale(1.06)}
  .prev{left:18px} .next{right:18px}

  /* ===== Footer brands (tight to cards, no bottom gap) ===== */
  .brands{
    display:flex;
    gap:10px;
    justify-content:flex-end;
    margin:8px var(--sidepad) 0 0;  /* small top gap, zero bottom */
    padding:0;
  }
  .brands span{font-size:14px; opacity:.75; font-weight:600}

  /* ===== Responsive: exact cards per view ===== */

  /* Mobile — 1 card, zero gap so nothing peeks in */
  @media (max-width:639.98px){
    .track{gap:0}
    .card{min-width:100%}                 /* exactly one card */
    .nav{width:42px; height:42px}
  }

  /* Tablet — 2 cards */
  @media (min-width:640px) and (max-width:1023.98px){
    .card{min-width:calc((100% - var(--gap)) / 2)}
  }

  /* Desktop — 4 cards */
  @media (min-width:1024px){
    .card{min-width:calc((100% - 3*var(--gap)) / 4)}
  }

  /* Hard kill any downstream spacing a host theme may inject */
  section.reviews, .reviews-section, .reviews-wrapper{
    margin-bottom:0 !important;
    padding-bottom:0 !important;
  }
</style>
</head>
<body>

<section class="reviews" aria-label="Customer reviews">
  <div class="container">
    <div class="shell">
      <button class="nav prev" aria-label="Previous reviews">‹</button>
      <div class="viewport">
        <ul class="track" id="track" aria-live="polite"></ul>
      </div>
      <button class="nav next" aria-label="Next reviews">›</button>
    </div>

    <div class="brands"><span>Google</span>·<span>ClickMechanic</span></div>
  </div>
</section>

<script>
(function(){
  // ===== Data (repairs-only) =====
  const REVIEWS = [
    {name:"Robert J.",  text:"Graeme is an excellent mechanic, highly knowledgeable very professional and totally reliable. Highly recommended.", rating:5},
    {name:"Daniel H.",  text:"Excellent – quick, back on the road in a flash. Would definitely use again in the future.", rating:5},
    {name:"Lauren D.",  text:"I have been using Graham as my mobile mechanic for the past 5 years and I cannot thank him enough for the amount of times he’s rescued us. He is so reliable, fairly priced honest and helpful. He will always help as soon as possible and do what he can to get the car on the road safely and quickly.", rating:5},
    {name:"Rav S.",     text:"Graeme was absolutely brilliant. He changed my brake discs this time and previously did the brake pads. Great workmanship and super professional. Thank you once again Graeme.", rating:5},
    {name:"Jon D.",     text:"Graeme arrived early and completed the work quickly, leaving no mess behind. Brakes feel great.", rating:5},
    {name:"Nick W.",    text:"I have been using Maxamy for many years now and cannot fault the excellent service I have received. I've had various work done, from routine maintenance to repairs, and Graeme has always delivered good quality work.", rating:5},
    {name:"Lindsay Y.", text:"He got straight on with the job and was very professional. My ABS light has gone out and the brakes feel much better.", rating:5},
    {name:"Leoni B.",   text:"My car starts first time now! Graeme was friendly, punctual and professional throughout.", rating:5},
    {name:"Cheryl T.",  text:"Graeme fixed the thermostat housing leak and the car now runs at the correct temperature. Great job.", rating:5},
    {name:"Adam F.",    text:"Many years of looking after our family cars and my Van. Always an in depth service, full explanations, care taken to get best prices for parts and always well priced. Friendly, punctual and pro active. Taking my car work to Maxamy was the best decision I made!", rating:5},
    {name:"Rob H.",     text:"Brilliant service. All the brake drums and shoes replaced quickly and the van’s brakes are now perfect.", rating:5},
    {name:"Eric S.",    text:"Graeme was punctual and completed both the front and rear brake work to a high standard. Very happy with the service.", rating:5},
    {name:"Michael W.", text:"Graeme replaced the timing belt at the agreed time and the car runs great. Couldn’t ask for more.", rating:5},
  ];

  const track   = document.getElementById('track');
  const prevBtn = document.querySelector('.prev');
  const nextBtn = document.querySelector('.next');
  const viewport= document.querySelector('.viewport');

  function stars(n){
    return `<span class="stars" aria-label="${n} out of 5 stars">
              <span class="full">${'★'.repeat(n)}</span><span class="empty">${'★'.repeat(5-n)}</span>
            </span>`;
  }
  const tick = `<svg viewBox="0 0 16 16" aria-hidden="true"><path d="M8 1.25a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5Zm-1 8.01L4.97 7.23l.99-.99L7 7.28 9.99 4.3l.99.99L7 9.26Z"/></svg>`;

  function card({name,text,rating}){
    return `<li class="card">
      <div class="top"><div class="name">${name}</div>${stars(rating)}</div>
      <div class="verify">${tick}<span>Verified Customer</span></div>
      <div class="body">${text}</div>
    </li>`;
  }
  track.innerHTML = REVIEWS.map(card).join('');

  // ===== Infinite loop scaffolding =====
  const perViewMax = 4; // clone this many on each side
  const originals = Array.from(track.children);
  originals.slice(0, perViewMax).forEach(el => track.appendChild(el.cloneNode(true)));
  originals.slice(-perViewMax).forEach(el => track.insertBefore(el.cloneNode(true), track.firstChild));

  let index = perViewMax;
  let step  = 0;

  function currentGap(){
    const s = getComputedStyle(track);
    return parseFloat(s.columnGap || s.gap) || 0;  // 0 on mobile
  }

  function recalc(){
    const first = track.children[perViewMax];
    if(!first) return;
    step = first.getBoundingClientRect().width + currentGap();
    move(index,false);
  }

  function move(i, animate=true){
    track.style.transition = animate ? 'transform .55s ease' : 'none';
    track.style.transform  = `translateX(${-i * step}px)`;
    index = i;
  }

  function next(){ move(index+1,true); }
  function prev(){ move(index-1,true); }

  track.addEventListener('transitionend', ()=>{
    const start = perViewMax;
    const end   = start + REVIEWS.length - 1;
    if (index > end)  move(start + (index - end - 1), false);
    if (index < start) move(end - (start - index - 1), false);
  });

  // Autoplay (10s); pauses on hover and when out of view
  let t=null, paused=false, visible=true;
  function start(){ stop(); t=setInterval(()=>{ if(!paused && visible) next(); }, 10000); }
  function stop(){ if(t) clearInterval(t); }
  viewport.addEventListener('mouseenter', ()=>paused=true);
  viewport.addEventListener('mouseleave', ()=>paused=false);
  const io = new IntersectionObserver((e)=>{ visible = e[0].isIntersecting; }, {threshold:.2});
  io.observe(viewport);

  // Touch swipe
  let sx=0, dx=0, touching=false;
  viewport.addEventListener('touchstart', e=>{ touching=true; sx=e.touches[0].clientX; dx=0; track.style.transition='none'; }, {passive:true});
  viewport.addEventListener('touchmove',  e=>{ if(!touching) return; dx=e.touches[0].clientX - sx; track.style.transform=`translateX(${-index*step - dx}px)`; }, {passive:true});
  viewport.addEventListener('touchend',   ()=>{ touching=false; Math.abs(dx)>step*0.25 ? (dx<0?next():prev()) : move(index,true); });

  prevBtn.addEventListener('click', prev);
  nextBtn.addEventListener('click', next);

  window.addEventListener('resize', recalc);
  if (document.fonts && document.fonts.ready) document.fonts.ready.then(recalc);

  recalc();
  move(index,false);
  start();
})();
</script>
</body>
</html>
